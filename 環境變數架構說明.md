# ç’°å¢ƒè®Šæ•¸æ¶æ§‹èªªæ˜

## ğŸ—ï¸ æœå‹™æ¶æ§‹

æ‚¨çš„æ‡‰ç”¨åŒ…å«ä¸‰å€‹ä¸»è¦æœå‹™ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Vercel    â”‚  (å‰ç«¯ + API Routes)
â”‚  (Frontend) â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ RASA_SERVER_URL
       â”‚ (åªéœ€è¦é€™ä¸€å€‹)
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      ACTION_SERVER_URL      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Rasa ä¸»æœå‹™ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚ Action Serverâ”‚
â”‚  (Zeabur)   â”‚                              â”‚   (Zeabur)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                                    â”‚
                                                    â”‚ éœ€è¦
                                                    â”‚ GEMINI_API_KEY
                                                    â–¼
                                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                            â”‚ Gemini API   â”‚
                                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“‹ ç’°å¢ƒè®Šæ•¸é…ç½®ä½ç½®

### 1. **Vercel** (å‰ç«¯/API Routes)
åªéœ€è¦è¨­ç½®ï¼š
- âœ… `RASA_SERVER_URL` - Rasa ä¸»æœå‹™çš„ URL
  - ä¾‹å¦‚ï¼š`https://rasa-service.zeabur.app`
- âœ… `GEMINI_API_KEY` - Gemini API é‡‘é‘°ï¼ˆç”¨æ–¼ `/api/gemini/chat`ï¼‰
- âœ… `GEMINI_MODEL`ï¼ˆå¯é¸ï¼‰- Gemini æ¨¡å‹åç¨±

**ç‚ºä»€éº¼åªéœ€è¦ä¸€å€‹ï¼Ÿ**
- Vercel çš„å‰ç«¯å’Œ API routes åªéœ€è¦çŸ¥é“ Rasa ä¸»æœå‹™çš„ä½ç½®
- Rasa ä¸»æœå‹™æœƒè‡ªå‹•è™•ç†èˆ‡ Action Server çš„é€šä¿¡
- Action Server çš„é€£æ¥æ˜¯åœ¨ Zeabur å…§éƒ¨é…ç½®çš„

### 2. **Zeabur Rasa ä¸»æœå‹™**
éœ€è¦è¨­ç½®ï¼š
- âœ… `SUPABASE_MODEL_URL` - æ¨¡å‹æª”æ¡ˆçš„ä¸‹è¼‰ URL
- âœ… `ACTION_SERVER_URL` - Action Server çš„ URL
  - ä¾‹å¦‚ï¼š`https://rasa-action-server-xxx.zeabur.app`
  - é€™å€‹ URL æœƒè‡ªå‹•å¾ Zeabur çš„ Action Server æœå‹™ç²å–

**å¦‚ä½•é€£æ¥ Action Serverï¼Ÿ**
- Rasa ä¸»æœå‹™é€šé `rasa/endpoints.yml` é…ç½®æ–‡ä»¶é€£æ¥ Action Server
- åœ¨ Zeabur éƒ¨ç½²æ™‚ï¼Œ`ACTION_SERVER_URL` ç’°å¢ƒè®Šæ•¸æœƒè¢«è‡ªå‹•è¨­ç½®
- Rasa æœƒä½¿ç”¨é€™å€‹ URL ä¾†èª¿ç”¨ Action Server

### 3. **Zeabur Action Server**
éœ€è¦è¨­ç½®ï¼š
- âœ… `GEMINI_API_KEY` - Gemini API é‡‘é‘°ï¼ˆèˆ‡ Vercel ç›¸åŒï¼‰
  - Action Server ä¸­çš„ actions éœ€è¦ä½¿ç”¨ Gemini API

## ğŸ”„ è«‹æ±‚æµç¨‹

1. **ç”¨æˆ¶ç™¼é€æ¶ˆæ¯** â†’ Vercel å‰ç«¯
2. **Vercel API Route** (`/api/rasa/webhook`) â†’ ä½¿ç”¨ `RASA_SERVER_URL` è½‰ç™¼è«‹æ±‚åˆ° Rasa ä¸»æœå‹™
3. **Rasa ä¸»æœå‹™** â†’ è™•ç† NLU å’Œå°è©±ç®¡ç†
4. **Rasa ä¸»æœå‹™** â†’ å¦‚æœéœ€è¦åŸ·è¡Œ actionï¼Œä½¿ç”¨ `ACTION_SERVER_URL` èª¿ç”¨ Action Server
5. **Action Server** â†’ åŸ·è¡Œè‡ªå®šç¾© actionï¼ˆå¯èƒ½éœ€è¦èª¿ç”¨ Gemini APIï¼‰
6. **Action Server** â†’ è¿”å›çµæœçµ¦ Rasa ä¸»æœå‹™
7. **Rasa ä¸»æœå‹™** â†’ è¿”å›å®Œæ•´éŸ¿æ‡‰çµ¦ Vercel
8. **Vercel** â†’ è¿”å›çµ¦å‰ç«¯é¡¯ç¤º

## âœ… ç¸½çµ

**Vercel åªéœ€è¦å¡«å¯« `RASA_SERVER_URL` æ˜¯æ­£ç¢ºçš„ï¼**

åŸå› ï¼š
- âœ… Vercel åªéœ€è¦çŸ¥é“ Rasa ä¸»æœå‹™çš„ä½ç½®
- âœ… Rasa ä¸»æœå‹™å’Œ Action Server ä¹‹é–“çš„é€£æ¥åœ¨ Zeabur å…§éƒ¨è™•ç†
- âœ… æ‰€æœ‰å¾Œç«¯æœå‹™ä¹‹é–“çš„é€šä¿¡éƒ½åœ¨ Zeabur å…§éƒ¨å®Œæˆ
- âœ… Vercel ä½œç‚ºå‰ç«¯ï¼Œåªéœ€è¦ä¸€å€‹å…¥å£é»ï¼ˆRasa ä¸»æœå‹™ï¼‰

## ğŸ“ å®Œæ•´ç’°å¢ƒè®Šæ•¸æ¸…å–®

### Vercel
- [x] `RASA_SERVER_URL` = `https://rasa-service.zeabur.app`
- [ ] `GEMINI_API_KEY` = `[æ‚¨çš„ API Key]`
- [ ] `GEMINI_MODEL` = `gemini-2.0-flash-exp`ï¼ˆå¯é¸ï¼‰

### Zeabur Rasa ä¸»æœå‹™
- [ ] `SUPABASE_MODEL_URL` = `[å¾ Supabase ç²å–çš„ URL]`
- [ ] `ACTION_SERVER_URL` = `[è‡ªå‹•å¾ Zeabur Action Server ç²å–]`

### Zeabur Action Server
- [ ] `GEMINI_API_KEY` = `[èˆ‡ Vercel ç›¸åŒ]`

---

**æœ€å¾Œæ›´æ–°**: 2025-12-25
